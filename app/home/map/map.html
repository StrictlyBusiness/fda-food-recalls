<div class="container-fluid">
  <div class="row">
    
    <div class="col-xs-6 col-sm-3 col-md-2">
      <div class="form-group">
        <label for="selectMonth">Month</label>
        <select class="form-control" id="selectMonth" ng-model="ctrl.criteria.month"
          ng-options="month.month as month.name for month in ctrl.months"
          ng-change="ctrl.selectMonth(ctrl.criteria.month)"></select>
      </div>
    </div>

    <div class="col-xs-6 col-sm-3 col-md-2">
      <div class="form-group">
        <label for="selectYear">Year</label>
        <select class="form-control" id="selectYear" ng-model="ctrl.criteria.year"
          ng-options="year for year in ctrl.years"
          ng-change="ctrl.selectYear(ctrl.criteria.year)"></select>
      </div>
    </div>

    <div class="col-xs-6 col-sm-3 col-md-2">
      <div class="form-group">
        <label for="selectClassification">Classification</label>
        <select class="form-control" id="selectClassification" ng-model="ctrl.criteria.classification"
          ng-options="classification for classification in ctrl.classifications"
          ng-change="ctrl.selectClassification(ctrl.criteria.classification)"></select>
      </div>
    </div>

    <div class="col-xs-6 col-sm-3 col-md-2">
      <div class="form-group">
        <label for="selectStatus">Status</label>
        <select class="form-control" id="selectStatus" ng-model="ctrl.criteria.status"
          ng-options="status for status in ctrl.statuses"
          ng-change="ctrl.selectStatus(ctrl.criteria.status)"></select>
      </div>
    </div>

    <div class="col-xs-12 col-sm-4">
      <div class="form-group">
        <label>Count</label>
        <div class="btn-group" style="width: 100%">
          <div class="btn btn-default" ng-click="ctrl.countBy = 'recalls'" ng-class="{active: ctrl.countBy === 'recalls'}">Recalls</div>
          <div class="btn btn-default" ng-click="ctrl.countBy = 'products'" ng-class="{active: ctrl.countBy === 'products'}">Recalled Products</div>
        </div>
      </div>
    </div>

  </div>
</div>

<us-map recalls-by-state="ctrl.recallsByState" count-by="ctrl.countBy" selected="selected"></us-map>

<div class="container-fluid recalls-summary" ng-if="selected">
  <span class="value">{{ selected.metadata.recalls.length }}</span>
  <ng-pluralize count="selected.metadata.recalls.length" when="{'0': 'recalls', '1': 'recall', 'other': 'recalls'}"></ng-pluralize>
  affecting
  <span class="value">{{ selected.metadata.productCount }}</span>
  <ng-pluralize count="selected.metadata.productCount" when="{'0': 'products', '1': 'product', 'other': 'products'}"></ng-pluralize>
  originating from
  <span class="value">{{ selected.metadata.name }}</span>
</div>

<div class="container-fluid recalls-summary" ng-if="!selected">
  <span class="value">{{ ctrl.recalls.length }}</span>
  <ng-pluralize count="ctrl.recalls.length" when="{'0': 'recalls', '1': 'recall', 'other': 'recalls'}"></ng-pluralize>
  affecting
  <span class="value">{{ ctrl.productCount }}</span>
  <ng-pluralize count="ctrl.productCount" when="{'0': 'products', '1': 'product', 'other': 'products'}"></ng-pluralize>

</div>

<div class="row">
  <recalls-list recalls="selected.metadata.recalls || ctrl.recalls"></recalls-list>
</div>
